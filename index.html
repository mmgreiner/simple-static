<html lang="en">
<body>
    <h1>Azure Static Web Apps auth demo</h1>
    <div>
        <a href="/.auth/login/aad">Log in with the Microsoft </a>
        <a href="/.auth/login/github">Log in with Github</a>
        <a href="/.auth/login/google">Log in with Google</a>
        
        <!--
        <a href="/.auth/login/facebook">Log in with Facebook</a>
        <a href="/.auth/login/twitter">Log in with Twitter</a>
        <a href="/.auth/login/apple">Log in with Apple</a>
        -->
        <br>
        <p id="myuser"></p>
        <br>
        <a href="/.auth/logout?post_logout_redirect_uri="https://wonderful-bay-09e697603.3.azurestaticapps.net>Logout</a>
    
    </div>
    <div>
        <ul>
            <li><a href="/anonymous/">Anonymous Role page</a></li>
            <li><a href="/authenticated/">Authenticated Role page</a></li>
            <li><a href="/custom/">Custom Role page</a></li>
            <li><a href="/custom/subdir/">Custom subdir page</a></li>
        </ul>
    </div>

    <script>
        async function getUserInfo() {
            const response = await fetch('/.auth/me');
            const payload = await response.json();
            const { clientPrincipal } = payload;
            return clientPrincipal;
            }

            (async () => {
                ui = await getUserInfo();
                //console.log(await getUserInfo());
                console.log(ui);
                var p = document.getElementById("myuser");
                p.innerHTML = ui.userDetails;
            })();
    </script>
</body>
</html>

